<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"></link>
    </h:head>
    <h:body>
   		<h:form>
   			<div class="col-lg-12">
	   			<div class="row">
	   				<div class="col-lg-6  form-group">
	   				<h:outputLabel value="Pesquisar por titulo ou tema"></h:outputLabel>
		        	<h:inputText  class="form-control" binding="#{postagemBean.inputPesquisa}" value="#{postagemBean.pesquisa}"></h:inputText>
	   			</div>
	   			<div class="col-lg-6  form-group" style="margin-top: 30px;">
	   				<h:commandButton value="Pesquisar" class="btn btn-primary" action="#{postagemBean.pesquisar}"/>
	   			</div>
	   			</div>
	   		</div>
   		</h:form>
   			
        
        <h:dataTable value="#{postagemBean.getPostagens()}" var="postagem"
		style="" cellpadding="5"
		rows="10"
		cellspacing="1" headerClass="header" 
		rowClasses="greenRow,whiteRow"
		class="table table-striped table-hover"
		> 
			<h:column>
				<f:facet name="header">Código</f:facet>
				#{postagem.id}
			</h:column>
			<h:column>
				<f:facet name="header">Titulo</f:facet>
				#{postagem.titulo}
			</h:column>
			<h:column>
				<f:facet name="header">Texto</f:facet>
				#{postagem.texto}
			</h:column>
			<h:column>
				<f:facet name="header">Tema</f:facet>
				#{postagem.tema.nome}
			</h:column>
			<h:column>
				<f:facet name="header">Usuário</f:facet>
				#{postagem.usuario.login}
			</h:column>
			<h:column>
				<f:facet name="header">Qtde Comentarios</f:facet>
				#{postagem.comentarios.size()}
			</h:column>
					
			<h:column>
				<f:facet name="header">Comentários</f:facet>
				<ul>
					<ui:repeat var="comentario" value="#{postagem.getComentarios()}">
					<li>#{comentario.getUsuario().getLogin()} :  #{comentario.getComentario()}</li>
					
				</ui:repeat>
				</ul>
				
			</h:column>
			<!-- <ui:repeat var="" value=""></ui:repeat> -->
			<h:column>
				<f:facet name="header">Data postagem</f:facet>
				#{postagem.created_at}
			</h:column>
			
		</h:dataTable>
		
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    </h:body>
</html>

